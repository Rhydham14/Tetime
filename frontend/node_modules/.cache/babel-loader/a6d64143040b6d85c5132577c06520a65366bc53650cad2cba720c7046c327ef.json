{"ast":null,"code":"import React,{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";// import axios from \"axios\";\nimport axiosInstance from'../Axios/axios';import\"../css/Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[credentials,setCredentials]=useState({email:\"\",password:\"\"});const[error,setError]=useState(\"\");const navigate=useNavigate();const handleChange=e=>{setCredentials({...credentials,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{const response=await axiosInstance.post(\"/api/users/login\",credentials);const{success,message,fname,user_id,token,refreshToken}=response.data;if(success&&fname){localStorage.setItem(\"token\",token);localStorage.setItem(\"refreshToken\",refreshToken);sessionStorage.setItem(\"user_id\",user_id);sessionStorage.setItem(\"fname\",fname);navigate(\"/dashboard\");}else{setError(message||\"Login incorrect\");}}catch(error){console.error(\"Login failed\",error);setError(\"An error occurred while logging in\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-danger text-center\",children:\"Tetime\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row mx-auto d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-12 p-5 mx-auto\",id:\"text\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"login\",id:\"login\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[error&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",placeholder:\"Enter email\",value:credentials.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"small\",{className:\"form-text text-muted\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",name:\"password\",placeholder:\"Password\",value:credentials.password,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark mt-2\",children:\"Submit\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign up\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",children:\"Dashboard\"})]})]})})]});};export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","axiosInstance","jsx","_jsx","jsxs","_jsxs","Login","credentials","setCredentials","email","password","error","setError","navigate","handleChange","e","target","name","value","handleSubmit","preventDefault","response","post","success","message","fname","user_id","token","refreshToken","data","localStorage","setItem","sessionStorage","console","className","children","id","onSubmit","style","color","htmlFor","type","placeholder","onChange","to"],"sources":["/home/rhydham/Documents/Tetime/frontend/src/jsx/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\n// import axios from \"axios\";\nimport axiosInstance from '../Axios/axios';\n\nimport \"../css/Login.css\";\n\nconst Login = () => {\n  const [credentials, setCredentials] = useState({ email: \"\", password: \"\" });\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    setCredentials({ ...credentials, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axiosInstance.post(\"/api/users/login\", credentials);\n      const { success, message, fname, user_id, token, refreshToken } = response.data;\n\n      if (success && fname) {\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"refreshToken\", refreshToken);\n        sessionStorage.setItem(\"user_id\", user_id);\n        sessionStorage.setItem(\"fname\", fname);\n        navigate(\"/dashboard\");\n      } else {\n        setError(message || \"Login incorrect\");\n      }\n    } catch (error) {\n      console.error(\"Login failed\", error);\n      setError(\"An error occurred while logging in\");\n    }\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <h1 className=\"text-danger text-center\">Tetime</h1>\n      <div className=\"row mx-auto d-flex justify-content-center\">\n        <div className=\"col-sm-12 p-5 mx-auto\" id=\"text\">\n          <h1 className=\"login\" id=\"login\">\n            Login\n          </h1>\n          <form onSubmit={handleSubmit}>\n            {error && <div style={{ color: \"red\" }}>{error}</div>}\n            <div className=\"form-group\">\n              <label htmlFor=\"email\">Email address</label>\n              <input\n                type=\"email\"\n                className=\"form-control\"\n                id=\"email\"\n                name=\"email\"\n                placeholder=\"Enter email\"\n                value={credentials.email}\n                onChange={handleChange}\n              />\n              <small className=\"form-text text-muted\">We'll never share your email with anyone else.</small>\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"password\">Password</label>\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                id=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n                value={credentials.password}\n                onChange={handleChange}\n              />\n            </div>\n            <button type=\"submit\" className=\"btn btn-dark mt-2\">\n              Submit\n            </button>\n            <p>Don't have an account? <Link to=\"/signup\">Sign up</Link></p>\n            <Link to=\"/dashboard\">Dashboard</Link>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}